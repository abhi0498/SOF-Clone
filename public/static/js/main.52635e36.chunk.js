(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t,a){e.exports=a(30)},23:function(e,t,a){},24:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(15),c=a.n(l),r=a(1),s=(a(23),a(4)),i=a(7),m=o.a.createContext({token:null,userID:null,API:"http://localhost:5000/graphql",login:function(){},logout:function(){}}),u=(a(24),function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)("login"),s=Object(r.a)(c,2),i=s[0],u=s[1],d=Object(n.useState)(""),b=Object(r.a)(d,2),f=b[0],g=b[1],E=Object(n.useState)(""),h=Object(r.a)(E,2),p=h[0],v=h[1],j=Object(n.useState)(""),N=Object(r.a)(j,2),y=N[0],O=N[1],x=Object(n.useState)(!1),S=Object(r.a)(x,2),k=S[0],w=S[1],I=Object(n.useContext)(m);return o.a.createElement("div",null,o.a.createElement("h1",null,"login"!==i?"SignUp":"Login"),o.a.createElement("form",{className:"container",onSubmit:function(e){if(I.token="a",e.preventDefault(),0!==f.trim().length&&0!==p.trim().length){var t={query:'\n        mutation{\n            signUp(UserData:{email:"'.concat(f,'",password:"').concat(p,'"})\n        }')};"login"===i&&(t={query:'\n            query{\n                login(UserData:{email:"'.concat(f,'",password:"').concat(p,'"}){\n                    userID\n                    tokenExpiration\n                    token\n                }\n            }')}),fetch(I.API,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.errors?(O(e.errors[0].message),l(!0),setTimeout((function(){l(!1)}),3e3),w(!1)):(O(""),l(!1),w(!0)),e.data.login.token&&(sessionStorage.setItem("token",e.data.login.token),sessionStorage.setItem("userID",e.data.login.userID),sessionStorage.setItem("tokenExpiration",e.data.login.tokenExpiration),I.login(e.data.login.token,e.data.login.userID,e.data.login.tokenExpiration)),console.log(e.errors),console.log(e)})).catch((function(e){console.log(e)}))}}},o.a.createElement("div",{className:"w-50 mr-auto"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"emailID"},"Email address"),o.a.createElement("input",{onChange:function(e){g(e.target.value)},type:"email",className:"form-control",id:"emailID","aria-describedby":"emailHelp"}),o.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{onChange:function(e){v(e.target.value)},type:"password",className:"form-control",id:"password"})),o.a.createElement("p",{className:"alert alert-danger ".concat(a?"":"d-none"),role:"alert"},y),o.a.createElement("p",{className:"alert alert-primary ".concat(k?"":"d-none"),role:"alert"},"Successfully signed up.Please login."),o.a.createElement("div",{className:"d-flex justify-content-around mt-5"},o.a.createElement("button",{className:"btn btn-primary"},"login"!==i?"SignUp":"Login")),o.a.createElement("p",{onClick:function(){u("login"===i?"signup":"login"),w(!1)}},"Go to ","login"===i?"SignUp":"Login"," Page"))))}),d=function(){return o.a.createElement("div",{className:"container mt-5"},o.a.createElement("h1",null,"Home"),o.a.createElement("p",null,"Welcome to my site. Here I  have tried to recreate the most basic version on stack overflow.You can visit the questions page after you are logged in."),o.a.createElement(s.b,{to:"/questions"},"Questions"),o.a.createElement("p",null,"Link to my github - ",o.a.createElement("a",{href:"https://github.com/abhi0498",target:"_blank"},"Github")))},b=function(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!0),u=Object(r.a)(i,2),d=u[0],b=u[1],f=Object(n.useState)(""),g=Object(r.a)(f,2),E=g[0],h=g[1],p=Object(n.useState)(""),v=Object(r.a)(p,2),j=v[0],N=v[1],y=Object(n.useState)(!1),O=Object(r.a)(y,2),x=O[0],S=O[1],k=Object(n.useState)(!1),w=Object(r.a)(k,2),I=w[0],q=w[1],C=Object(n.useContext)(m);Object(n.useEffect)((function(){console.log("useeffect");fetch(C.API,{method:"POST",body:JSON.stringify({query:"\n        query{\n            questions{\n                _id\n                title\n                creator{\n                    email\n                }\n            }\n        }"}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){c(e.data.questions),b(!1)})).catch((function(e){console.log(e)}))}),[I]);var D=o.a.createElement("div",{className:"d-flex align-items-center mt-5 "},o.a.createElement("div",{className:"spinner-border mx-auto  align-self-center m-auto text-primary",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")));return d||(D=l.map((function(e){return o.a.createElement(s.b,{to:"/questions/".concat(e._id),className:"container",key:e._id},o.a.createElement("div",{className:"card bg-secondary text-white m-4"},o.a.createElement("div",{className:" display-4 card-header"},e.title),o.a.createElement("div",{className:"card-body"},o.a.createElement("blockquote",{className:"blockquote mb-0"},o.a.createElement("footer",{className:"blockquote-footer"},e.creator.email)))))}))),o.a.createElement("div",{className:"mx-5 container"},o.a.createElement("h1",null,"Questions"),o.a.createElement("div",{className:"container",style:{transition:"height 2s"}},!x&&o.a.createElement("button",{onClick:function(){S(!0)}},"Ask Your Question "),x&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},o.a.createElement("h3",null,"Ask your Question"),o.a.createElement("button",{onClick:function(){S(!1)},type:"button",className:"close ml-5 mb-1","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("form",{className:"container",onSubmit:function(e){e.preventDefault(),q(!I),alert("Question submitted"),S(!1);var t={query:'\n            mutation{\n                askQuestion(QuestionData:{title:"'.concat(E,'",text:"').concat(j,'"})\n              }')};fetch(C.API,{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer "+C.token,"Content-Type":"application/json"}}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},o.a.createElement("div",{className:"w-50 mr-auto"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"emailID"},"Title"),o.a.createElement("input",{onChange:function(e){h(e.target.value)},type:"text",className:"form-control",id:"title"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"text"},"Text"),o.a.createElement("textarea",{onChange:function(e){N(e.target.value)},className:"form-control",id:"text",rows:"3"})),o.a.createElement("button",null,"Submit"))))),D)},f=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),s=Object(r.a)(c,2),i=s[0],u=s[1],d=Object(n.useState)(!1),b=Object(r.a)(d,2),f=b[0],g=b[1],E=Object(n.useContext)(m);return o.a.createElement("div",{className:"container",style:{transition:"height 2s"}},!f&&o.a.createElement("button",{onClick:function(){g(!0)}},"Open "),f&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},o.a.createElement("h3",null,"Ask your Question"),o.a.createElement("button",{onClick:function(){g(!1)},type:"button",className:"close ml-5 mb-1","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("form",{className:"container",onSubmit:function(e){e.preventDefault();var t={query:'\n            mutation{\n                askQuestion(QuestionData:{title:"'.concat(a,'",text:"').concat(i,'"})\n              }')};fetch("/graphql",{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer "+E.token,"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},o.a.createElement("div",{className:"w-50 mr-auto"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"emailID"},"Title"),o.a.createElement("input",{onChange:function(e){l(e.target.value)},type:"text",className:"form-control",id:"title"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"text"},"Text"),o.a.createElement("textarea",{onChange:function(e){u(e.target.value)},className:"form-control",id:"text",rows:"3"})),o.a.createElement("button",null,"Submit")))))},g=function(){var e=Object(n.useContext)(m),t=Object(i.g)().id,a=Object(n.useState)(""),l=Object(r.a)(a,2),c=l[0],s=l[1],u=Object(n.useState)([]),d=Object(r.a)(u,2),b=d[0],f=d[1],g=Object(n.useState)([]),E=Object(r.a)(g,2),h=E[0],p=E[1],v=Object(n.useState)(!1),j=Object(r.a)(v,2),N=(j[0],j[1]),y=Object(n.useState)(!0),O=Object(r.a)(y,2),x=O[0],S=O[1],k=Object(n.useState)([]),w=Object(r.a)(k,2),I=w[0],q=w[1];return Object(n.useEffect)((function(){console.log("useEffect");var a={query:'\n        query{\n            question(id:"'.concat(t,'"){\n                _id\n                title\n                text\n                creator{\n                    email\n                }\n                createdAt\n                answers{\n                    _id\n                        creator{\n                            _id \n                            email\n                        }\n                        text\n                        createdAt\n                }\n            }\n        }')};fetch(e.API,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){f(t.data.question),p(t.data.question.answers),S(!1),h.forEach((function(t){t.creator._id===e.userID&&N(!0)}))})).catch((function(e){console.log(e)}))}),[I]),setTimeout((function(){q(!I)}),5e3),o.a.createElement("div",{className:"mx-5"},o.a.createElement("h1",null,"Question"),x&&o.a.createElement("div",{className:"d-flex align-items-center mt-5 "},o.a.createElement("div",{className:"spinner-border mx-auto  align-self-center m-auto text-primary",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading..."))),!x&&o.a.createElement("div",{className:"container mt-5"},o.a.createElement("div",{className:"jumbotron"},o.a.createElement("h1",{className:"display-4",title:"title"},b.title),o.a.createElement("p",{className:"lead",title:"title"},b.text),o.a.createElement("hr",{className:"my-4"}),o.a.createElement("p",{title:"date",className:"lead"},"Asked On ",b.createdAt),o.a.createElement("p",{title:"asked by"},"by - ",b.creator.email)),o.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},o.a.createElement("h3",null,"Answer this Question")),o.a.createElement("form",{className:"container jumbotron w-xs-100 w-md-75",onSubmit:function(a){if(a.preventDefault(),0!==c.trim().length){var n={query:'\n            mutation{\n                answerQuestion(AnswerData:{text:"'.concat(c,'",questionID:"').concat(t,'"})\n              }')};fetch(e.API,{method:"POST",body:JSON.stringify(n),headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"}}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),q(!I)}else alert("Enter some text")}},o.a.createElement("div",{className:"mr-auto"},o.a.createElement("div",{className:"form-group d-flex flex-sm-column flex-lg-row justify-content-around  w-100 align-items-end"},o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"text"},"Your Answer"),o.a.createElement("textarea",{onChange:function(e){s(e.target.value)},className:"form-control",id:"text",rows:"6",cols:"50"})),o.a.createElement("button",{className:"mt-xs-4 mt-md-0 btn btn-primary h-25 "},"Submit")))),o.a.createElement("div",{className:"mb-5"},o.a.createElement("h3",null,"Answers"),o.a.createElement("div",{className:"list-group"},h.map((function(e){return o.a.createElement("div",{className:"list-group-item list-group-item-action flex-column align-items-start",key:e._id},o.a.createElement("div",{className:"d-flex w-100 justify-content-between"},o.a.createElement("h4",{className:"mb-1"},e.text),o.a.createElement("small",null,e.createdAt)),o.a.createElement("h5",{className:"mb-1"},"-",e.creator.email),o.a.createElement("hr",null))}))))))},E=function(){var e=Object(n.useContext)(m);return o.a.createElement(o.a.Fragment,null,o.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-light bg-light"},o.a.createElement(s.b,{to:"/",className:"navbar-brand"},"SF CLone"),o.a.createElement("div",{className:"navbar-nav ml-sm-auto"},e.token&&o.a.createElement("li",{className:"nav-item nav-link"},o.a.createElement(s.c,{to:"/questions"},"Questions")),!e.token&&o.a.createElement("li",{className:"nav-item nav-link"},o.a.createElement(s.c,{to:"/auth"},"Login")),e.token&&o.a.createElement("li",{onClick:e.logout,className:"nav-item nav-link"},o.a.createElement(s.c,{to:"/auth"},"Logout")))))};var h=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),h=Object(r.a)(c,2),p=h[0],v=h[1],j=function(e,t,a){l(e),v(t)};return Object(n.useEffect)((function(){sessionStorage.getItem("token")&&j(sessionStorage.getItem("token"),sessionStorage.getItem("userID"),sessionStorage.getItem("tokenExpiration"))}),[]),o.a.createElement(s.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(m.Provider,{value:{token:a,userID:p,login:j,logout:function(){l(null),v(null),sessionStorage.removeItem("token"),sessionStorage.removeItem("tokenExpiration"),sessionStorage.removeItem("userID")},API:"https://sof-clone.herokuapp.com/graphql"}},o.a.createElement(E,null),o.a.createElement(i.d,null,!a&&o.a.createElement(i.b,{path:"/auth",component:u,exact:!0}),a&&o.a.createElement(i.a,{from:"/auth",to:"/questions",component:b,exact:!0}),!a&&o.a.createElement(i.a,{from:"/questions",to:"/auth",component:u}),o.a.createElement(i.b,{path:"/questions",component:b,exact:!0}),o.a.createElement(i.b,{path:"/questions/ask",component:f,exact:!0}),o.a.createElement(i.b,{path:"/questions/:id",component:g,exact:!0}),o.a.createElement(i.b,{path:"/",component:d})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.52635e36.chunk.js.map